@using Microsoft.AspNetCore.Identity
@using Pustok.Models
@inject UserManager<AppUser> UserManager

@{
    var displayName = "Account";
    if (User.Identity?.IsAuthenticated == true)
    {
  var currentUser = await UserManager.FindByNameAsync(User.Identity.Name!);
        displayName = currentUser?.FullName ?? User.Identity.Name ?? "User";
    }
}

@if (User.Identity?.IsAuthenticated == true)
{
    <li class="menu-item-has-children">
   <a href="#">
  <i class="fas fa-user-circle"></i> @displayName 
       <i class="fas fa-angle-down"></i>
 </a>
  <ul class="sub-menu">
    <li><a asp-controller="Account" asp-action="MyAccount">
   <i class="fas fa-user"></i> My Account
   </a></li>
            <li><a asp-controller="Account" asp-action="MyAccount">
       <i class="fas fa-shopping-bag"></i> My Orders
   </a></li>
<li>
   <form asp-controller="Account" asp-action="Logout" method="post" class="mobile-logout-form">
       @Html.AntiForgeryToken()
 <button type="submit" class="mobile-logout-btn">
    <i class="fas fa-sign-out-alt"></i> Logout
     </button>
        </form>
 </li>
    </ul>
    </li>
}
else
{
    <li class="menu-item-has-children">
<a href="#">
     <i class="fas fa-user"></i> Account 
            <i class="fas fa-angle-down"></i>
        </a>
 <ul class="sub-menu">
            <li><a asp-controller="Account" asp-action="Login">
      <i class="fas fa-sign-in-alt"></i> Login
      </a></li>
      <li><a asp-controller="Account" asp-action="Register">
       <i class="fas fa-user-plus"></i> Register
         </a></li>
      </ul>
    </li>
}
